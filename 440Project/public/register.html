<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <link rel="stylesheet" href="style.css" />

  </head>
  <body>
    <form>
      <label for="User_name">Username:</label>
      <input type="text" id="User_name" name="User_name" required /><br /><br />

      <label for="User_password">Password:</label>
      <input
        type="User_password"
        id="User_password"
        name="User_password"
        required
      /><br /><br />

      <label for="confirmPassword">Confirm Password:</label>
      <input
        type="password"
        id="confirmPassword"
        name="confirmPassword"
        required
      /><br /><br />

      <label for="Email">Email:</label>
      <input type="Email" id="Email" name="Email" required /><br /><br />

      <label for="Phone_number">Phone Number:</label>
      <input
        type="Phone_number"
        id="Phone_number"
        name="Phone_number"
        required
      /><br /><br />

      <div class="button-group">
      <input type="submit" value="Register" />
      <input type="reset" value="Reset" /><br /><br />
      <div class="button-group">
    </form>
    <script>
      // JavaScript code to handle form submission and validation can be added here
      document
        .querySelector("form")
        .addEventListener("submit", async function (event) {
          event.preventDefault(); // Prevent the default form submission

          // Perform validation and registration logic here
          const userName = document.getElementById("User_name").value;
          const password = document.getElementById("User_password").value;
          const confirmPassword = document.getElementById("confirmPassword").value;
          const email = document.getElementById("Email").value;
          const phoneNumber = document.getElementById("Phone_number").value;

          if(!email || !password || !confirmPassword || !phoneNumber || !userName) {
            alert("Please fill in all fields!");
            return;
          }
          if (password !== confirmPassword) {
            alert("Passwords do not match!");
            return;
          }
          if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
            alert("Invalid email format!");
            return;
          }
          if(!/^\d{10}$/.test(phoneNumber)) {
            alert("Phone number must be 10 digits!");
            return;
          }
          if(!/^[a-zA-Z0-9]+$/.test(userName)) {
            alert("Username can only contain letters and numbers!");
            return;
          }
          let User_ID = Math.floor(Math.random() * 1000000); // Generate a random user ID
          // Here you would typically send the data to the server for registration
          const response = await fetch("http://localhost:3000/register", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ User_ID, userName, password, email, phoneNumber }),
          });

          if (response.ok) {
            // Successful registration
            alert("Registration successful!");
            alert("STORE THIS! User ID: " + User_ID); // Debugging: Log values to check
            window.location.href = "index.html"; // redirect to homepage
          } else {
            const result = await response.json();
            alert(result.message || "Registration failed");
          }
        });
    </script>
  </body>
</html>
